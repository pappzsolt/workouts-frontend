<div class="w-screen min-h-screen bg-white px-4 sm:px-6 lg:px-8 py-6 flex flex-col items-center">
  <h2 class="text-2xl font-bold mb-6 text-center">Új Felhasználó</h2>

  <!-- Üzenet -->
  <div *ngIf="message"
       [ngClass]="{'text-red-600': isError, 'text-green-600': !isError}"
       class="mb-4 font-medium">
    {{ message }}
  </div>

  <form #userForm="ngForm" (ngSubmit)="onSubmit(userForm)"
        class="w-full max-w-7xl bg-white rounded-xl shadow-lg p-6 grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">

    <div>
      <label for="username">Username</label>
      <input id="username" name="username" type="text" required
             [(ngModel)]="user.username"
             class="border px-3 py-2 rounded-lg w-full"/>
    </div>

    <div>
      <label for="email">Email</label>
      <input id="email" name="email" type="email" required
             [(ngModel)]="user.email"
             class="border px-3 py-2 rounded-lg w-full"/>
    </div>

    <div>
      <label for="password">Password</label>
      <input id="password" name="password" type="password" required
             [(ngModel)]="user.passwordHash"
             class="border px-3 py-2 rounded-lg w-full"/>
    </div>

    <!-- Hiányzó mezők -->
    <div>
      <label for="age">Age</label>
      <input id="age" name="age" type="number"
             [(ngModel)]="user.age"
             class="border px-3 py-2 rounded-lg w-full"/>
    </div>

    <div>
      <label for="weight">Weight (kg)</label>
      <input id="weight" name="weight" type="number" step="0.01"
             [(ngModel)]="user.weight"
             class="border px-3 py-2 rounded-lg w-full"/>
    </div>

    <div>
      <label for="height">Height (cm)</label>
      <input id="height" name="height" type="number" step="0.01"
             [(ngModel)]="user.height"
             class="border px-3 py-2 rounded-lg w-full"/>
    </div>

    <div>
      <label for="gender">Gender</label>
      <input id="gender" name="gender" type="text"
             [(ngModel)]="user.gender"
             class="border px-3 py-2 rounded-lg w-full"/>
    </div>

    <div class="sm:col-span-2 md:col-span-3 lg:col-span-4">
      <label for="goals">Goals</label>
      <textarea id="goals" name="goals"
                [(ngModel)]="user.goals"
                class="border px-3 py-2 rounded-lg w-full"></textarea>
    </div>

    <div>
      <label for="avatarUrl">Avatar URL</label>
      <input id="avatarUrl" name="avatarUrl" type="text"
             [(ngModel)]="user.avatarUrl"
             class="border px-3 py-2 rounded-lg w-full"/>
    </div>

    <!-- Coach select (combobox) -->
    <div class="sm:col-span-2 md:col-span-3 lg:col-span-4">
      <label class="block mb-1">Assign Coach</label>
      <app-coach-select [(selectedCoachId)]="user.coachId" (coachSelected)="onCoachSelected($event)"></app-coach-select>
    </div>

    <!-- Role kiválasztás -->
    <div class="sm:col-span-2 md:col-span-3 lg:col-span-4">
      <label class="block mb-1">Roles*</label>
      <app-role-select [roles]="roles" (roleSelected)="onRoleSelected($event)"></app-role-select>
      <div class="mt-2">
        <span *ngFor="let r of user.roleIds"
              class="inline-block bg-blue-200 text-blue-800 px-2 py-1 rounded mr-1 mb-1 cursor-pointer"
              (click)="onRemoveRole(r)">
          {{ r.name }} <span class="font-bold ml-1">x</span>
        </span>
      </div>
    </div>

    <!-- Submit -->
    <div class="sm:col-span-2 md:col-span-3 lg:col-span-4 text-center mt-4">
      <button type="submit"
              class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700">
        Új
      </button>
    </div>
  </form>
</div>
